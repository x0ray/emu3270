///////////////////////////////////////////////////////////////////////////
// Project:   Emu3270
// Program:   utilu.pas
// Language:  Object Pascal - Delphi ver 2.0
// Support:   David Fahey
// Date:      28May97
// Purpose:   Utility functions.
// History:   14Apr97  Initial coding                              DAF
// Notes:     None
///////////////////////////////////////////////////////////////////////////

unit utilu ;

interface

uses Windows, SysUtils, Classes ;

type
  TTranTab = array[0..255] of byte ;

function as2eb(a: byte): byte ;
function eb2as(a: byte): byte ;

const
  a2e: TTranTab =
  (     { 0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F }
  { 0 } $00,$01,$02,$03,$37,$2D,$2E,$2F,$16,$05,$25,$0B,$0C,$0D,$0E,$0F,
  { 1 } $10,$11,$12,$13,$3C,$3D,$32,$26,$18,$19,$3F,$27,$1C,$1D,$1E,$1F,
  { 2 } $40,$5A,$7F,$7B,$5B,$6C,$50,$7D,$4D,$5D,$5C,$4E,$6B,$60,$4B,$61,
  { 3 } $F0,$F1,$F2,$F3,$F4,$F5,$F6,$F7,$F8,$F9,$7A,$5E,$4C,$7E,$6E,$6F,
  { 4 } $7C,$C1,$C2,$C3,$C4,$C5,$C6,$C7,$C8,$C9,$D1,$D2,$D3,$D4,$D5,$D6,
  { 5 } $D7,$D8,$D9,$E2,$E3,$E4,$E5,$E6,$E7,$E8,$E9,$AD,$E0,$BD,$5F,$6D,
  { 6 } $79,$81,$82,$83,$84,$85,$86,$87,$88,$89,$91,$92,$93,$94,$95,$96,
  { 7 } $97,$98,$99,$A2,$A3,$A4,$A5,$A6,$A7,$A8,$A9,$C0,$4F,$D0,$A1,$07,
  { 8 } $20,$21,$22,$23,$24,$15,$06,$17,$28,$29,$2A,$2B,$2C,$09,$0A,$1B,
  { 9 } $30,$31,$1A,$33,$34,$35,$36,$08,$38,$39,$3A,$3B,$04,$14,$3E,$E1,
  { A } $41,$42,$43,$44,$45,$46,$47,$48,$49,$51,$52,$53,$54,$55,$56,$57,
  { B } $58,$59,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,
  { C } $76,$77,$78,$80,$8A,$8B,$8C,$8D,$8E,$8F,$90,$9A,$9B,$9C,$9D,$9E,
  { D } $9F,$A0,$AA,$AB,$AC,$AD,$AE,$AF,$B0,$B1,$B2,$B3,$B4,$B5,$B6,$B7,
  { E } $B8,$B9,$BA,$BB,$BC,$BD,$BE,$BF,$CA,$CB,$CC,$CD,$CE,$CF,$DA,$DB,
  { F } $DC,$DD,$DE,$DF,$EA,$EB,$EC,$ED,$EE,$EF,$FA,$FB,$FC,$FD,$FE,$FF
  ) ;

  e2a: TTranTab =
  (     { 0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F }
  { 0 } $00,$01,$02,$03,$9C,$09,$86,$7F,$97,$8D,$8E,$0B,$0C,$0D,$0E,$0F,
  { 1 } $10,$11,$12,$13,$9D,$85,$08,$87,$18,$19,$92,$8F,$1C,$1D,$1E,$1F,
  { 2 } $80,$81,$82,$83,$84,$0A,$17,$1B,$88,$89,$8A,$8B,$8C,$05,$06,$07,
  { 3 } $90,$91,$16,$93,$94,$95,$96,$04,$98,$99,$9A,$9B,$14,$15,$9E,$1A,
  { 4 } $20,$A0,$A1,$A2,$A3,$A4,$A5,$A6,$A7,$A8,$5B,$2E,$3C,$28,$2B,$7C,
  { 5 } $26,$A9,$AA,$AB,$AC,$AD,$AE,$AF,$B0,$B1,$21,$24,$2A,$29,$3B,$5E,
  { 6 } $2D,$2F,$B2,$B3,$B4,$B5,$B6,$B7,$B8,$B9,$5D,$2C,$25,$5F,$3E,$3F,
  { 7 } $BA,$BB,$BC,$BD,$BE,$BF,$C0,$C1,$C2,$60,$3A,$23,$40,$27,$3D,$22,
  { 8 } $C3,$61,$62,$63,$64,$65,$66,$67,$68,$69,$C4,$C5,$C6,$C7,$C8,$C9,
  { 9 } $CA,$6A,$6B,$6C,$6D,$6E,$6F,$70,$71,$72,$CB,$CC,$CD,$CE,$CF,$D0,
  { A } $D1,$7E,$73,$74,$75,$76,$77,$78,$79,$7A,$D2,$D3,$D4,$D5,$D6,$D7,
  { B } $D8,$D9,$DA,$DB,$DC,$DD,$DE,$DF,$E0,$E1,$E2,$E3,$E4,$E5,$E6,$E7,
  { C } $7B,$41,$42,$43,$44,$45,$46,$47,$48,$49,$E8,$E9,$EA,$EB,$EC,$ED,
  { D } $7D,$4A,$4B,$4C,$4D,$4E,$4F,$50,$51,$52,$EE,$EF,$F0,$F1,$F2,$F3,
  { E } $5C,$9F,$53,$54,$55,$56,$57,$58,$59,$5A,$F4,$F5,$F6,$F7,$F8,$F9,
  { F } $30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$FA,$FB,$FC,$FD,$FE,$FF
  ) ;

implementation

function as2eb(a: byte): byte ;
begin
  as2eb := a2e[a] ;
end ;

function eb2as(a: byte): byte ;
begin
  eb2as := e2a[a] ;
end ;

end.
 